<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Advanced usage &mdash; kraken 0.7.5-6-g09dd4a3
 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.7.5-6-g09dd4a3
',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="kraken 0.7.5-6-g09dd4a3
 documentation" href="index.html" />
    <link rel="next" title="Training" href="ketos.html" />
    <link rel="prev" title="kraken" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="advanced-usage">
<h1>Advanced usage<a class="headerlink" href="#advanced-usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="binarization">
<h2>Binarization<a class="headerlink" href="#binarization" title="Permalink to this headline">¶</a></h2>
<p>The binarization subcommand accepts almost the same parameters as
<code class="docutils literal"><span class="pre">ocropus-nlbin</span></code>. Only options not related to binarization, e.g. skew
detection are missing. In addition, error checking (image sizes, inversion
detection, grayscale enforcement) is always disabled and kraken will happily
binarize any image that is thrown at it.</p>
<p>Available parameters are:</p>
<blockquote>
<div>&#8211;threshold FLOAT
&#8211;zoom FLOAT
&#8211;escale FLOAT
&#8211;border FLOAT
&#8211;perc INTEGER RANGE
&#8211;range INTEGER
&#8211;low INTEGER RANGE
&#8211;high INTEGER RANGE</div></blockquote>
</div>
<div class="section" id="page-segmentation">
<h2>Page segmentation<a class="headerlink" href="#page-segmentation" title="Permalink to this headline">¶</a></h2>
<p>Page segmentation is mostly parameterless, although a switch to change the
color of column separators has been retained. The segmentation is written as a
plain text CSV file. Each record corresponds to a single line bounding box in
the format (x0, y0, x1, y1). Lines are printed in reading order:</p>
<div class="highlight-python"><div class="highlight"><pre>$ kraken -i 14.tif lines.txt segment
$ cat lines.txt
422,188,2158,327
421,328,2158,430
415,464,2153,599
412,604,2153,745
406,744,2152,882
405,877,2144,1020
403,1020,2139,1150
399,1160,2136,1297
394,1292,2137,1435
391,1431,2131,1572
385,1566,2128,1709
379,1710,2128,1830
383,1854,2126,1986
370,1985,2125,2127
369,2123,2118,2268
369,2268,2111,2407
366,2401,2116,2514
363,2541,2107,2682
364,2677,2109,2819
358,2815,2106,2956
354,2955,2098,3092
355,3092,2094,3230
1859,3233,2084,3354
</pre></div>
</div>
</div>
<div class="section" id="model-repository">
<h2>Model Repository<a class="headerlink" href="#model-repository" title="Permalink to this headline">¶</a></h2>
<p>There is a semi-curated <a class="reference external" href="https://github.com/mittagessen/kraken-models">repository</a> of freely licensed recognition
models that can be accessed from the command line using a few subcommands. For
evaluating a series of models it is also possible to just clone the repository
using the normal git client.</p>
<p>The <code class="docutils literal"><span class="pre">list</span></code> subcommand retrieves a list of all models available and prints
them including some additional information (identifier, type, and a short
description):</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> kraken list
<span class="go">Retrieving model list   ✓</span>
<span class="go">default (pyrnn) - A converted version of en-default.pyrnn.gz</span>
<span class="go">toy (clstm) - A toy model trained on 400 lines of the UW3 data set.</span>
</pre></div>
</div>
<p>To access more detailed information the <code class="docutils literal"><span class="pre">show</span></code> subcommand may be used:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> kraken show toy
<span class="go">name: toy.clstm</span>

<span class="go">A toy model trained on 400 lines of the UW3 data set.</span>

<span class="go">author: Benjamin Kiessling (mittagessen@l.unchti.me)</span>
<span class="go">http://kraken.re</span>
</pre></div>
</div>
<p>If a suitable model has been decided upon it can be retrieved using the <code class="docutils literal"><span class="pre">get</span></code>
subcommand:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> kraken get toy
<span class="go">Retrieving model        ✓</span>
</pre></div>
</div>
<p>Models will be placed in ~/.kraken and can be accessed using their name as
shown by the <code class="docutils literal"><span class="pre">show</span></code> command, e.g.:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> kraken -i ... ... ocr -m toy.clstm
</pre></div>
</div>
<p>Additions and updates to existing models are always welcome! Just open a pull
request or write an email.</p>
</div>
<div class="section" id="recognition">
<h2>Recognition<a class="headerlink" href="#recognition" title="Permalink to this headline">¶</a></h2>
<p>Recognition requires a grey-scale or binarized image, a page segmentation for
that image, and a pyrnn or protobuf model. In particular there is no
requirement to use the page segmentation algorithm contained in the <code class="docutils literal"><span class="pre">segment</span></code>
subcommand or the binarization provided by kraken.</p>
<p>The <code class="docutils literal"><span class="pre">ocr</span></code> subcommand is able to print the recognition results either as plain
text (default) or as <a class="reference external" href="https://docs.google.com/document/d/1QQnIQtvdAC_8n92-LhwPcjtAUFwBlzE8EWnKAxlgVf0/preview">hOCR</a>
containing additional information about the results.</p>
<p>hOCR output is slightly different from hOCR files produced by ocropus. Each
<code class="docutils literal"><span class="pre">ocr_line</span></code> span contains not only the bounding box of the line but also
character cuts (<code class="docutils literal"><span class="pre">cuts</span></code> attribute) indicating the coordinates of each
character. In each line sequences of alphanumeric (in the unicode sense)
character are put into <code class="docutils literal"><span class="pre">ocrx_word</span></code> spans. Non-alphanumeric sequences are
described by <code class="docutils literal"><span class="pre">ocrx_word</span></code> spans. Both have bounding boxes as attributes and
the recognition confidence for each character in the <code class="docutils literal"><span class="pre">x_conf</span></code> attribute.</p>
<p>Paragraph detection has been removed as it was deemed to be unduly dependent on
certain typographic features which may not be valid for your input.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/kraken.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Advanced usage</a><ul>
<li><a class="reference internal" href="#binarization">Binarization</a></li>
<li><a class="reference internal" href="#page-segmentation">Page segmentation</a></li>
<li><a class="reference internal" href="#model-repository">Model Repository</a></li>
<li><a class="reference internal" href="#recognition">Recognition</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">kraken</a></li>
      <li>Next: <a href="ketos.html" title="next chapter">Training</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, mittagessen.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="_sources/advanced.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>