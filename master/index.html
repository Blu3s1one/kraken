
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>kraken &#8212; kraken  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/banner.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced usage" href="advanced.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  


    
    



    <p class="scv-banner"><a href="../0.10.0/index.html"><b>Warning:</b> This document is for the development version of kraken. The latest version is 0.10.0.</a></p>
<div class="section" id="kraken">
<h1>kraken<a class="headerlink" href="#kraken" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>kraken is a turn-key OCR system forked from <a class="reference external" href="https://github.com/tmbdev/ocropy">ocropus</a>. It is intended to rectify a number of
issues while preserving (mostly) functional equivalence.</p>
</div>
<div class="section" id="features">
<h1>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h1>
<p>kraken’s main features are:</p>
<blockquote>
<div><ul class="simple">
<li>Script detection and multi-script recognition support</li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Right-to-left">Right-to-Left</a>, <a class="reference external" href="https://en.wikipedia.org/wiki/Bi-directional_text">BiDi</a>, and Top-to-Bottom
script support</li>
<li><a class="reference external" href="https://www.loc.gov/standards/alto/">ALTO</a> and hOCR output</li>
<li>Word bounding boxes and character cuts</li>
<li><a class="reference external" href="https://github.com/mittagessen/kraken-models">Public repository</a> of model files</li>
<li><a class="reference internal" href="models.html#models"><span class="std std-ref">Lightweight model files</span></a></li>
<li><span class="xref std std-ref">Variable recognition network architectures</span></li>
</ul>
</div></blockquote>
<p>All functionality not pertaining to OCR and prerequisite steps has been
removed, i.e. no more error rate measuring, etc.</p>
<p>Pull requests and code contributions are always welcome.</p>
</div>
<div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>kraken requires some external libraries to run. On Debian/Ubuntu they may be
installed using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt install libpangocairo-1.0 libxml2 libblas3 liblapack3 python3-dev python3-pip
</pre></div>
</div>
<div class="section" id="pip">
<h2>pip<a class="headerlink" href="#pip" title="Permalink to this headline">¶</a></h2>
<p>Because the build behavior of pip versions older than 6.1.0 interferes with the
scipy build process numpy has to be installed before doing the actual install:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip3 install numpy
</pre></div>
</div>
<p>Install kraken either from pypi:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip3 install kraken
</pre></div>
</div>
<p>or by running pip in the git repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip3 install .
</pre></div>
</div>
</div>
<div class="section" id="conda">
<h2>conda<a class="headerlink" href="#conda" title="Permalink to this headline">¶</a></h2>
<p>If you are running <a class="reference external" href="https://www.anaconda.com/download/">Anaconda</a>/miniconda, use:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda install -c mittagessen kraken
</pre></div>
</div>
</div>
<div class="section" id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h2>
<p>Finally you’ll have to scrounge up an RNN to do the actual recognition of
characters. To download ocropus’ default RNN converted to the new format and
place it in the kraken directory for the current user:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> kraken get default
</pre></div>
</div>
<p>A list of libre models available in the central repository can be retrieved by
running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ kraken list
</pre></div>
</div>
<p>Model metadata can be extracted using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ kraken show arabic-alam-al-kutub
name: arabic-alam-al-kutub.clstm

An experimental model for Classical Arabic texts.

Network trained on 889 lines of [0] as a test case for a general Classical
Arabic model. Ground truth was prepared by Sarah Savant
&lt;sarah.savant@aku.edu&gt; and Maxim Romanov &lt;maxim.romanov@uni-leipzig.de&gt;.

Vocalization was omitted in the ground truth. Training was stopped at ~35000
iterations with an accuracy of 97%.

[0] Ibn al-Faqīh (d. 365 AH). Kitāb al-buldān. Edited by Yūsuf al-Hādī, 1st
edition. Bayrūt: ʿĀlam al-kutub, 1416 AH/1996 CE.
alphabet:  !()-.0123456789:[] «»،؟ءابةتثجحخدذرزسشصضطظعغفقكلمنهوىي ARABIC
MADDAH ABOVE, ARABIC HAMZA ABOVE, ARABIC HAMZA BELOW
</pre></div>
</div>
</div>
</div>
<div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>Recognizing text on an image using the default parameters including the
prerequisite steps of binarization and page segmentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ kraken -i image.tif image.txt binarize segment ocr
Loading RNN     ✓
Processing      ⣻
</pre></div>
</div>
<p>To binarize a single image using the nlbin algorithm:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ kraken -i image.tif bw.tif binarize
</pre></div>
</div>
<p>To segment a binarized image into reading-order sorted lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ kraken -i bw.tif lines.json segment
</pre></div>
</div>
<p>To OCR a binarized image using the default RNN and the previously generated
page segmentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ kraken -i bw.tif image.txt ocr --lines lines.json
</pre></div>
</div>
<p>All commands and their parameters are documented, just add the standard
<code class="docutils literal notranslate"><span class="pre">--help</span></code> flag for further information.</p>
</div>
<div class="section" id="training-tutorial">
<h1>Training Tutorial<a class="headerlink" href="#training-tutorial" title="Permalink to this headline">¶</a></h1>
<p>There is a training tutorial at <a class="reference internal" href="training.html"><span class="doc">Training a kraken model</span></a>.</p>
</div>
<div class="section" id="license">
<span id="id1"></span><h1>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Kraken</span></code> is provided under the terms and conditions of the <a class="reference external" href="https://github.com/mittagessen/kraken/blob/master/LICENSE">Apache 2.0
License</a> retained
from the original <code class="docutils literal notranslate"><span class="pre">ocropus</span></code> distribution.</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="#">
              <img class="logo" src="_static/kraken.png" alt="Logo"/>
            </a></p><h3>Useful Links</h3>
<ul>
  <li><a href="http://kraken.re">The Kraken Website</a></li>
  <li><a href="http://pypi.python.org/pypi/kraken">kraken @ PyPI</a></li>
  <li><a href="http://github.com/mittagessen/kraken">kraken @ github</a></li>
  <li><a href="http://github.com/mittagessen/kraken/issues">Issue Tracker</a></li>
</ul><h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="ketos.html">Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3>Versions</h3>
<ul>
    <li><a href="index.html">master</a></li>
    <li><a href="../0.10.0/index.html">0.10.0</a></li>
    <li><a href="../0.4.0/index.html">0.4.0</a></li>
    <li><a href="../0.8.0/index.html">0.8.0</a></li>
    <li><a href="../0.9.0/index.html">0.9.0</a></li>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, mittagessen.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>